/*! For license information please see trader.screen-large.b31ff640a71899b8e173.js.LICENSE.txt */
"use strict";(self.webpackChunk_deriv_trader=self.webpackChunk_deriv_trader||[]).push([["screen-large"],{"./src/Modules/Trading/Components/Form/screen-large.jsx":(e,t,r)=>{r.r(t),r.d(t,{default:()=>We});var n=r("../../node_modules/classnames/index.js"),a=r.n(n),i=r("../../node_modules/prop-types/index.js"),o=r.n(i),l=r("react"),u=r("./src/App/Components/Elements/ContentLoader/index.js"),c=r("./src/App/Components/Form/fieldset.jsx"),s=r("./src/Modules/Trading/Containers/contract-type.jsx"),d=r("./src/Modules/Trading/Containers/purchase.jsx"),m=r("mobx-react"),_=r("@deriv/shared"),p=r("@deriv/components"),f=r("@deriv/translations"),y=r("./src/Stores/Modules/Trading/Helpers/allow-equals.js"),v=function(e){var t=e.contract_start_type,r=e.contract_type,n=e.contract_types_list,a=e.duration_unit,i=e.expiry_type,o=e.onChange,u=e.value,c=e.has_equals_only,s=(0,y.OW)(n,a,t),d=(0,y.vy)(n);return(0,y.i$)(r)&&(s||"endtime"===i)&&d&&l.createElement("div",{className:"allow-equals"},l.createElement(p.Checkbox,{className:"allow-equals__input-field",id:"dt_allow_equals_input",onChange:function(e){e.persist();var t=e.target,r=t.name,n=t.checked;o({target:{name:r,value:Number(n)}})},defaultChecked:!!u,name:"is_equal",label:(0,f.localize)("Allow equals"),classNameLabel:"allow-equals__label",disabled:c}),l.createElement(p.Popover,{alignment:"left",classNameTarget:"allow-equals__tooltip",icon:"info",id:"dt_allow_equals_info",message:(0,f.localize)("Win payout if exit spot is also equal to entry spot."),margin:130,relative_render:!0}))};v.propTypes={contract_start_type:o().string,contract_type:o().string,contract_types_list:o().object,duration_unit:o().string,expiry_type:o().string,has_equals_only:o().bool,onChange:o().func,value:o().number};const g=v;var h=r("./src/Stores/connect.js"),b=function(e){var t=e.multiplier,r=e.multiplier_range_list,n=e.onChange;return l.createElement(p.Dropdown,{id:"multiplier",className:"trade-container__multiplier-dropdown",is_alignment_left:!0,is_nativepicker:!1,list:r,name:"multiplier",no_border:!0,value:t,onChange:n})};b.propTypes={multiplier:o().oneOfType([o().number,o().string]),multiplier_range_list:m.PropTypes.arrayOrObservableArray,onChange:o().func};const x=(0,h.$j)((function(e){var t=e.modules;return{multiplier:t.trade.multiplier,multiplier_range_list:t.trade.multiplier_range_list,onChange:t.trade.onChange}}))(b);var E=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/info.jsx");function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){var t=e.amount,r=e.currency,n=e.current_focus,a=e.error_messages,i=e.is_nativepicker,o=e.is_single_currency,u=e.onChange,c=e.setCurrentFocus;return l.createElement(p.InputField,{className:"trade-container__amount",classNameInlinePrefix:"trade-container__currency",classNameInput:"trade-container__input",currency:r,current_focus:n,error_messages:a,fractional_digits:(0,_.getDecimalPlaces)(r),id:"dt_amount_input",inline_prefix:o?r:null,is_autocomplete_disabled:!0,is_float:!0,is_hj_whitelisted:!0,is_incrementable:!0,is_nativepicker:i,is_negative_disabled:!0,max_length:_.AMOUNT_MAX_LENGTH,name:"amount",onChange:u,type:"tel",value:t,ariaLabel:(0,f.localize)("Amount"),setCurrentFocus:c})},j=function(e){var t=e.amount,r=e.basis,n=e.basis_list,i=e.contract_start_type,o=e.contract_type,u=e.contract_types_list,s=e.currencies_list,d=e.currency,m=e.current_focus,y=e.duration_unit,v=e.expiry_type,h=e.is_accumulator,b=e.is_equal,C=e.is_minimized,j=e.is_multiplier,O=e.is_nativepicker,S=e.is_single_currency,T=e.has_equals_only,M=e.onChange,N=e.setCurrentFocus,A=e.validation_errors,F=e.stake_boundary,P=e.vanilla_trade_type;if(C)return l.createElement("div",{className:"fieldset-minimized fieldset-minimized__amount"},l.createElement("span",{className:"fieldset-minimized__basis"},(n.find((function(e){return e.value===r}))||{}).text),"Â ",l.createElement("i",null,l.createElement("span",{className:a()("fieldset-minimized__currency","symbols",w({},"symbols--".concat((d||"").toLowerCase()),d))})),(0,_.addComma)(t,2));var D=A.amount;return l.createElement(c.Z,{className:"trade-container__fieldset center-text",header:j||["high_low","vanilla"].includes(o)||h?(0,f.localize)("Stake"):void 0,header_tooltip:j?l.createElement(f.Localize,{i18n_default_text:"Your gross profit is the percentage change in market price times your stake and the multiplier chosen here."}):"vanilla"===o?l.createElement(f.Localize,{i18n_default_text:"Your stake is a non-refundable one-time premium to purchase this contract. Your total profit/loss equals the contract value minus your stake."}):null},n.length>1&&l.createElement(p.ButtonToggle,{id:"dt_amount_toggle",buttons_arr:n.map((function(e){return{text:e.text,value:e.value}})),className:"dropdown--no-margin",is_animated:!0,name:"basis",onChange:M,value:r}),S?l.createElement(k,{amount:t,currency:d,current_focus:m,error_messages:D,is_single_currency:S,is_nativepicker:O,onChange:M,setCurrentFocus:N}):l.createElement("div",{className:"trade-container__currency-options"},l.createElement(k,{amount:t,currency:d,current_focus:m,error_messages:D,is_single_currency:S,is_nativepicker:O,onChange:M,setCurrentFocus:N}),l.createElement(p.Dropdown,{id:"amount",className:a()({"dc-dropdown-container__currency":!S}),is_alignment_left:!0,is_nativepicker:!1,list:s,name:"currency",initial_offset:256,no_border:!0,value:d,onChange:M})),l.createElement(g,{contract_start_type:i,contract_type:o,contract_types_list:u,duration_unit:y,expiry_type:v,onChange:M,value:parseInt(b),has_equals_only:T}),j&&l.createElement(l.Fragment,null,l.createElement(x,null),l.createElement(E.Z,{className:"trade-container__multipliers-trade-info",should_show_tooltip:!0,is_tooltip_relative:!0})),"vanilla"===o&&l.createElement("section",{className:"trade-container__stake-field"},l.createElement("div",{className:"trade-container__stake-field--min"},l.createElement(p.Text,{size:"xxxs"},(0,f.localize)("Min. stake")),l.createElement(p.Text,{size:"xxs"},F[P].min_stake," ",d)),l.createElement("div",{className:"trade-container__stake-field--max"},l.createElement(p.Text,{size:"xxxs"},(0,f.localize)("Max. stake")),l.createElement(p.Text,{size:"xxs"},F[P].max_stake," ",d))))};j.propTypes={amount:o().oneOfType([o().number,o().string]),basis:o().string,basis_list:m.PropTypes.arrayOrObservableArray,contract_start_type:o().string,contract_type:o().string,contract_types_list:m.PropTypes.observableObject,currencies_list:m.PropTypes.observableObject,currency:o().string,current_focus:o().string,duration_unit:o().string,expiry_type:o().string,is_accumulator:o().bool,is_equal:o().oneOfType([o().number,o().string]),is_minimized:o().bool,is_multiplier:o().bool,is_nativepicker:o().bool,is_single_currency:o().bool,has_equals_only:o().bool,setCurrentFocus:o().func,onChange:o().func,validation_errors:o().object,stake_boundary:o().object,vanilla_trade_type:o().object};const O=(0,h.$j)((function(e){var t=e.modules,r=e.client,n=e.ui;return{amount:t.trade.amount,basis:t.trade.basis,basis_list:t.trade.basis_list,contract_start_type:t.trade.contract_start_type,contract_type:t.trade.contract_type,contract_types_list:t.trade.contract_types_list,currencies_list:r.currencies_list,currency:t.trade.currency,current_focus:n.current_focus,duration_unit:t.trade.duration_unit,expiry_type:t.trade.expiry_type,is_accumulator:t.trade.is_accumulator,is_equal:t.trade.is_equal,is_single_currency:r.is_single_currency,is_multiplier:t.trade.is_multiplier,has_equals_only:t.trade.has_equals_only,stop_out:t.trade.stop_out,onChange:t.trade.onChange,setCurrentFocus:n.setCurrentFocus,vanilla_trade_type:n.vanilla_trade_type,validation_errors:t.trade.validation_errors,stake_boundary:t.trade.stake_boundary}}))(j);var S=r("./src/Modules/Trading/Components/Form/TradeParams/barrier.jsx");function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var M=function(e){var t=e.hover_value,r=e.max_value,n=e.min_value,i=e.onClick,o=e.onMouseEnter,u=e.onMouseLeave,c=e.value;if(!r||!n)return null;var s=function(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(Array(r-n+1).keys()),d=function(e){return e+n===c},m=function(e){return e+n<c},_=function(e){return!m(e)&&e+n<=t};return l.createElement(l.Fragment,null,s.map((function(e){return l.createElement("span",{"data-testid":"tick_step_".concat(e+n),key:e,"data-value":e+n,className:a()("range-slider__ticks-step",{"range-slider__ticks-step--active":d(e),"range-slider__ticks-step--marked":m(e),"range-slider__ticks-step--marked-hover":_(e)}),onClick:function(){return i(e+n)},onMouseEnter:function(){return o(e+n)},onMouseLeave:u})})))};M.propTypes={hover_value:o().number,max_value:o().number,min_value:o().number,onClick:o().func,onMouseEnter:o().func,onMouseLeave:o().func,value:o().number};const N=M;function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var F=function(e){var t=e.className,r=e.name,n=e.value,i=e.min_value,o=e.max_value,u=e.onChange,c=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l.useState(0),2),s=c[0],d=c[1],m=l.useRef(),_=function(e){var t=e.nativeEvent,r=t.offsetX,n=t.offsetY;(n<=-3||n>=3||r<-3||r>3)&&v()},y=function(e,t){return"".concat(10/(o-i)*(e-i)*2+(t?.8:1.4),"em")},v=function(){s&&(d(0),m.current.style.width=0)},g=s||n;return l.createElement("div",{className:a()("range-slider",t,{"range-slider__error":n<i||n>o})},l.createElement("label",{className:"range-slider__label",htmlFor:"range"},l.createElement("input",{className:"input trade-container__input range-slider__track",id:"dt_duration_range_input",max:o,min:i,name:r,onChange:function(e){var t=+e.target.value;t!==n&&(v(),u({target:{name:r,value:t}}))},tabIndex:"0",type:"range",value:n,"aria-label":"range-input"}),l.createElement("span",{ref:m,className:"range-slider__line range-slider__line--fill",onMouseLeave:_}),l.createElement("div",{className:"range-slider__ticks"},l.createElement(N,{hover_value:s,max_value:o,min_value:i,onClick:function(e){e!==n&&(v(),u({target:{name:r,value:e}}))},onMouseLeave:_,onMouseEnter:function(e){e&&(d(e),m.current.style.width=y(e,!0))},value:n})),l.createElement("div",{className:"range-slider__line",style:{width:"".concat(y(n))}})),l.createElement("div",{className:"range-slider__caption"},!!g&&l.createElement(p.Text,{align:"center",weight:"bold",size:"xs",color:"prominent",id:"dt_range_slider_label"},1===g&&(0,f.localize)("{{display_value}} Tick",{display_value:g}),g>1&&(0,f.localize)("{{display_value}} Ticks",{display_value:g}))))};F.propTypes={className:o().string,max_value:o().number,min_value:o().number,name:o().string,onChange:o().func,value:o().number};const P=F;var D=function(e){var t=e.name,r=e.onChange,n=e.value,i=a()("advanced-simple-toggle__icon","select-arrow",{"advanced-simple-toggle__icon--active":n});return l.createElement(l.Fragment,null,l.createElement("button",{id:n?"dt_advanced_toggle":"dt_simple_toggle",className:"advanced-simple-toggle",onClick:function(){r({target:{value:!n,name:t}})},"aria-label":(0,f.localize)("Toggle between advanced and simple duration settings")},l.createElement(p.Icon,{icon:"IcChevronDown",className:i,classNamePath:"advanced-simple-toggle__icon-path"})))};D.propTypes={name:o().string,onChange:o().func,value:o().bool};const z=D;var I=r("./src/Stores/Modules/Trading/Helpers/contract-type.js");function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function U(){U=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function c(e,t,r,a){var i=t&&t.prototype instanceof m?t:m,o=Object.create(i.prototype),l=new k(a||[]);return n(o,"_invoke",{value:x(e,r,l)}),o}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function m(){}function _(){}function p(){}var f={};u(f,i,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(j([])));v&&v!==t&&r.call(v,i)&&(f=v);var g=p.prototype=m.prototype=Object.create(f);function h(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function a(n,i,o,l){var u=s(e[n],e,i);if("throw"!==u.type){var c=u.arg,d=c.value;return d&&"object"==L(d)&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){a("next",e,o,l)}),(function(e){a("throw",e,o,l)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return a("throw",e,o,l)}))}l(u.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){a(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function x(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return{value:void 0,done:!0}}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var l=E(o,r);if(l){if(l===d)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(e,t,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}function E(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var a=s(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,d;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function w(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,a=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return a.next=a}}return{next:O}}function O(){return{value:void 0,done:!0}}return _.prototype=p,n(g,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:_,configurable:!0}),_.displayName=u(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===_||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,u(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},h(b.prototype),u(b.prototype,o,(function(){return this})),e.AsyncIterator=b,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new b(c(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},h(g),u(g,l,"Generator"),u(g,i,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return o.type="throw",o.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],o=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),w(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;w(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},e}function Y(e,t,r,n,a,i,o){try{var l=e[i](o),u=l.value}catch(e){return void r(e)}l.done?t(u):Promise.resolve(u).then(n,a)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function o(e){Y(i,n,a,o,l,"next",e)}function l(e){Y(i,n,a,o,l,"throw",e)}o(void 0)}))}}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=function(e){var t,r,n=e.duration,i=e.duration_min_max,o=e.duration_units_list,u=e.expiry_type,c=e.id,s=e.is_24_hours_contract,d=e.mode,m=e.name,y=e.onChange,v=e.server_time,g=e.start_date,h=e.start_time,b=e.symbol,x=e.validation_errors,E=(0,_.useIsMounted)(),C=Z(l.useState([]),2),w=C[0],k=C[1],j=Z(l.useState([]),2),O=j[0],S=j[1],T=Z(l.useState(n),2),M=T[0],N=T[1],A=Z(l.useState(),2),F=A[0],P=A[1];l.useEffect((function(){$()}),[$]),l.useEffect((function(){M!==n&&N(n)}),[n]);var D=function(){return(0,_.setTime)((0,_.toMoment)((0,_.hasIntradayDurationUnit)(o)?(0,_.toMoment)(v).clone():(0,_.toMoment)(v).clone().add(null==i||null===(e=i.daily)||void 0===e?void 0:e.min,"second")),(0,_.isTimeValid)(h)?h:v.format("HH:mm:ss"));var e},z=function(){return i.daily?i.daily.max:31536e3},L=function(){var e="duration"===u,t=D().clone().startOf("day");return e&&(0,_.hasIntradayDurationUnit)(o)?t.add(1,"day"):t},Y=function(){return"duration"===d},$=l.useCallback(q(U().mark((function e(){var t,r,n,a=arguments;return U().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:(0,_.toMoment)().format("YYYY-MM-DD"),r=[],n=[],e.next=5,I.R.getTradingEvents(t,b);case 5:e.sent.forEach((function(e){var t=e.dates.split(", ");-1!==t.indexOf("Fridays")&&(n=[6,0]),r.push({dates:t,descrip:e.descrip})})),E()&&(k(n),S(r));case 8:case"end":return e.stop()}}),e)}))),[E,b]),H=!(null==x||null===(t=x[m])||void 0===t||!t.length);return l.createElement("div",{className:a()("dc-input-field",{"dc-input-field--has-error":H})},l.createElement(p.Tooltip,{className:"trade-container__tooltip",alignment:"left",message:H?x[m][0]:void 0,has_error:H},l.createElement(p.DatePicker,{id:c,alignment:"left",display_format:"DD MMM YYYY",show_leading_icon:!0,error:null!=x&&null!==(r=x[m])&&void 0!==r&&r.length?"":void 0,mode:d,max_date:s?D().clone().add(g?86400:z(),"second"):D().clone().add(z(),"second"),min_date:L(),name:m,onChange:function(e){E()&&(Y()?N(e.duration):e.target.value&&P((0,_.toMoment)(e.target.value))),"function"==typeof y&&e.target&&y({target:{name:e.target.name,value:Y()?e.target.value:(0,_.toMoment)(e.target.value).format("YYYY-MM-DD")}})},onChangeCalendarMonth:$,has_range_selection:Y(),has_today_btn:!Y(),footer:Y()?M?1==+M?(0,f.localize)("Duration: {{duration}} day",{duration:M}):(0,f.localize)("Duration: {{duration}} days",{duration:M}):(0,f.localize)("Minimum duration is 1 day"):null,events:O,disabled_days:w,keep_open:!0,readOnly:!Y(),value:Y()?(0,_.toMoment)().add(M,"days").format("YYYY-MM-DD"):F||L()})))};H.propTypes={duration:o().oneOfType([o().string,o().number]),duration_min_max:o().object,duration_units_list:m.PropTypes.arrayOrObservableArray,expiry_type:o().string,id:o().oneOfType([o().string,o().number]),is_24_hours_contract:o().bool,mode:o().string,name:o().string,onChange:o().func,server_time:o().object,start_date:o().oneOfType([o().number,o().string]),start_time:o().string,symbol:o().string,validation_errors:o().object};const G=(0,h.$j)((function(e){var t=e.modules,r=e.common;return{duration:t.trade.duration,duration_min_max:t.trade.duration_min_max,duration_units_list:t.trade.duration_units_list,expiry_type:t.trade.expiry_type,onChange:t.trade.onChange,server_time:r.server_time,start_date:t.trade.start_date,start_time:t.trade.start_time,symbol:t.trade.symbol,validation_errors:t.trade.validation_errors}}))(H);var B=r("../../node_modules/react-transition-group/esm/CSSTransition.js");function W(e){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},W(e)}function R(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==W(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===W(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return J(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t,r,n){for(var a=0;a<t.length;a++)if(e.isBetween(t[a],r[a],n))return!0;return!1}var ee=function(e){var t=e.preClass,r=e.selected_time,n=e.end_times,i=e.start_times,o=e.onChange,u=e.className,c=i?i.map((function(e){return(0,_.toMoment)(e)})):[(0,_.toMoment)()],s=n?n.map((function(e){return(0,_.toMoment)(e)})):[(0,_.toMoment)().hour("23").minute("59").seconds("59").milliseconds("999")],d=(0,_.toMoment)(),m=X(r.split(":"),2),p=m[0],y=m[1],v=V(Array(24).keys()).map((function(e){return"0".concat(e).slice(-2)})),g=V(Array(12).keys()).map((function(e){return"0".concat(5*e).slice(-2)})),h=function(e,t,r){if((!(arguments.length>3&&void 0!==arguments[3])||arguments[3])&&r){var n=X(r.split(":"),2),a=n[0],i=n[1];("h"===e&&t!==a||"m"===e&&t!==i)&&o("".concat("h"===e?t:a,":").concat("m"===e?t:i))}};return l.createElement("div",{className:a()("".concat(t,"__dialog"),"".concat(u))},l.createElement("div",{className:"".concat(t,"__selector")},l.createElement("div",{className:"".concat(t,"__selector--hours")},l.createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},l.createElement("strong",null,(0,f.localize)("Hour"))),l.createElement("div",null,v.map((function(e,n){d.hour(e);var i=c.map((function(e){return e.clone().minute(0)})),o=K(d,i,s),u=K(d,c,s,"minute"),m=d.minutes()>52?o&&u:o;return l.createElement("div",{className:a()("".concat(t,"__selector-list-item"),R({},"".concat(t,"__selector-list-item--selected"),p===e),R({},"".concat(t,"__selector-list-item--disabled"),!m)),key:n,onClick:function(){h("h",e,r,m)}},e)})))),l.createElement("div",{className:"".concat(t,"__selector--minutes")},l.createElement("div",{className:a()("".concat(t,"__selector-list-title"),"center-text")},l.createElement("strong",null,(0,f.localize)("Minute"))),l.createElement("div",null,g.map((function(e,n){d.hour(p).minute(e);var i=K(d,c,s,"minute");return l.createElement("div",{className:a()("".concat(t,"__selector-list-item"),R({},"".concat(t,"__selector-list-item--selected"),y===e),R({},"".concat(t,"__selector-list-item--disabled"),!i)),key:n,onClick:function(){h("m",e,r,i)}},e)}))))))};ee.propTypes={className:o().string,end_times:o().array,onChange:o().func,preClass:o().string,selected_time:o().array,start_times:o().array};const te=ee;function re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ne(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ne(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ne(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ie(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe="time-picker",le=function(e){var t=e.current_focus,r=e.end_times,n=e.is_nativepicker,i=e.name,o=e.onChange,u=e.padding,c=e.placeholder,s=e.selected_time,d=e.setCurrentFocus,m=e.start_times,_=e.validation_errors,f=ae(l.useState(!1),2),y=f[0],v=f[1],g=ae(l.useState(null),2),h=g[0],b=g[1];l.useEffect((function(){return document.addEventListener("mousedown",E),function(){return document.removeEventListener("mousedown",E)}}));var x=function(e){var t="object"===ne(e)?e.target.selected_time:e;t!==s&&o({target:{name:i,value:t}})},E=function(e){null!=h&&h.contains(e.target)||!y||v(!1)};return l.createElement("div",{ref:function(e){e&&b(e)},className:a()(oe,re({},"".concat(oe,"--padding"),u))},n?l.createElement("input",{type:"time",id:"dt_".concat(i,"_input"),value:s,onChange:x,name:i,min:m[0],max:r[r.length-1]}):l.createElement(l.Fragment,null,l.createElement(p.InputField,{error_messages:_,type:"text",is_hj_whitelisted:!0,is_read_only:!0,id:"dt_".concat(i,"_input"),className:a()("".concat(oe,"-input")),current_focus:t,value:"".concat(s," GMT"),onClick:function(){v(!y)},name:i,placeholder:c,setCurrentFocus:d}),l.createElement(p.Icon,{icon:"IcClockOutline",className:"".concat(oe,"__icon")}),l.createElement(B.Z,{in:y,classNames:{enter:"time-picker__dialog--enter",enterDone:"time-picker__dialog--enter-done",exit:"time-picker__dialog--exit"},timeout:100,unmountOnExit:!0},l.createElement(te,{end_times:r,start_times:m,className:"from-left",onChange:x,preClass:oe,selected_time:s}))))};le.propTypes={current_focus:o().string,end_times:o().array,is_clearable:o().bool,is_nativepicker:o().bool,name:o().string,onChange:o().func,padding:o().string,placeholder:o().string,selected_time:o().string,setCurrentFocus:o().func,start_times:o().array,validation_errors:o().array};const ue=(0,m.observer)((0,h.$j)((function(e){var t=e.ui;return{current_focus:t.current_focus,setCurrentFocus:t.setCurrentFocus}}))(le));var ce=function(e,t){return e.minute(Math.ceil(e.minute()/t)*t)},se=function(e){var t=e.expiry_date,r=e.expiry_time,n=e.market_close_times,a=e.market_open_times,i=e.onChange,o=e.server_time,u=e.is_market_closed,c=(0,_.toMoment)(t),s=a.map((function(e){return(0,_.setTime)(c.clone(),e)})),d=n.map((function(e){return(0,_.setTime)(c.clone(),e)})),m=(0,_.setTime)(c.clone(),r),p=(0,_.toMoment)(o),f=function(e,t,r){var n={start:t.map((function(t){return e.isBefore(t)?t.clone():e})),end:r};return n.start.length>0&&(n.start[0]=ce(n.start[0],5)),n}(p.clone(),s,d),y=function(e,t,r,n){for(var a=0;a<r.length;a++)if(t.isAfter(r[a])&&t.isBefore(n[a]))return ce(t,5).format("HH:mm");for(var i=0;i<r.length;i++)if(r[i].isAfter(e))return ce(r[i],5).format("HH:mm");return ce(e,5).format("HH:mm")}(p.clone(),m,s,d);return l.useEffect((function(){r===y||u||i({target:{name:"expiry_time",value:y}})}),[r,y,i,u]),l.createElement(ue,{end_times:f.end,onChange:i,name:"expiry_time",placeholder:"12:00",start_times:f.start,selected_time:y})};se.propTypes={expiry_date:o().oneOfType([o().string,o().number]),expiry_time:o().string,is_market_closed:o().bool,market_close_times:o().array,market_open_times:o().array,name:o().string,onChange:o().func,server_time:o().object};const de=(0,h.$j)((function(e){var t=e.modules,r=e.common;return{duration_units_list:t.trade.duration_units_list,expiry_time:t.trade.expiry_time,expiry_date:t.trade.expiry_date,market_close_times:t.trade.market_close_times,market_open_times:t.trade.market_open_times,onChange:t.trade.onChange,server_time:r.server_time,is_market_closed:t.trade.is_market_closed}}))(se);function me(){return me=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},me.apply(this,arguments)}var _e=function(e){var t=e.advanced_duration_unit,r=e.advanced_expiry_type,n=e.duration_units_list,i=e.duration_t,o=e.contract_expiry_type,u=e.changeDurationUnit,c=e.current_focus,s=e.getDurationFromUnit,d=e.expiry_date,m=e.expiry_list,f=e.expiry_type,y=e.number_input_props,v=e.onChange,g=e.onChangeUiStore,h=e.server_time,b=e.setCurrentFocus,x=e.shared_input_props,E=e.start_date,C=e.validation_errors,w=!1;if("endtime"===f){var k=(0,_.hasIntradayDurationUnit)(n);w=(!!E||(0,_.toMoment)(d||h).isSame((0,_.toMoment)(h),"day"))&&k}var j=a()("endtime-container",{"has-time":w});return l.createElement(l.Fragment,null,m.length>1&&l.createElement(p.ButtonToggle,{id:"dt_advanced_duration_toggle",buttons_arr:m,name:"advanced_expiry_type",is_animated:!0,onChange:function(e){var t=e.target,r=t.name,n=t.value;v({target:{name:"expiry_type",value:n}}),g({name:r,value:n})},value:r}),"duration"===f?l.createElement(l.Fragment,null,l.createElement("div",{className:"duration-container"},n.length>=1&&l.createElement(p.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,id:"duration",is_alignment_left:!0,is_nativepicker:!1,list:n,name:"advanced_duration_unit",no_border:!0,onChange:u,value:t}),"t"===t&&"tick"===o&&l.createElement(P,me({name:"duration",ticks:10,value:i},x)),"d"===t&&l.createElement(G,{id:"dt_advanced_duration_datepicker",mode:"duration",name:"duration",is_24_hours_contract:w}),"t"!==t&&"d"!==t&&l.createElement(p.InputField,me({id:"dt_advanced_duration_input",classNameInput:"trade-container__input",current_focus:c,error_messages:C.duration,label:1===n.length?n[0].text:null,name:"duration",setCurrentFocus:b,value:s(t)},y,x)))):l.createElement(l.Fragment,null,l.createElement("div",{className:j},l.createElement(G,{id:"dt_advanced_duration_datepicker",name:"expiry_date",is_24_hours_contract:w,value:d}),w&&l.createElement(de,null))))};_e.propTypes={advanced_duration_unit:o().string,advanced_expiry_type:o().string,changeDurationUnit:o().func,contract_expiry_type:o().string,current_focus:o().string,duration_t:o().number,duration_units_list:m.PropTypes.arrayOrObservableArray,expiry_date:o().oneOfType([o().string,o().number]),expiry_list:o().array,expiry_type:o().string,getDurationFromUnit:o().func,number_input_props:o().object,onChange:o().func,onChangeUiStore:o().func,server_time:o().object,setCurrentFocus:o().func,shared_input_props:o().object,start_date:o().oneOfType([o().number,o().string]),validation_errors:o().object};const pe=(0,h.$j)((function(e){var t=e.modules,r=e.ui;return{contract_expiry_type:t.trade.contract_expiry_type,current_focus:r.current_focus,setCurrentFocus:r.setCurrentFocus,validation_errors:t.trade.validation_errors}}))(_e);function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fe.apply(this,arguments)}var ye=function(e){var t,r,n,a=e.contract_expiry_type,i=e.changeDurationUnit,o=e.current_focus,u=e.duration_t,c=e.duration_units_list,s=e.getDurationFromUnit,d=e.number_input_props,m=e.shared_input_props,_=e.simple_duration_unit,f=e.validation_errors,y=e.setCurrentFocus,v=!c.some((function(e){return"t"===e.value}));return l.createElement(l.Fragment,null,c.length>1&&l.createElement(p.ButtonToggle,{id:"dt_simple_duration_toggle",buttons_arr:(r=c,n=r.filter((function(e){return"t"===e.value||"m"===e.value})),n.length<=1?[]:n),is_animated:!0,name:"simple_duration_unit",onChange:i,value:_}),"t"===_&&"tick"===a&&l.createElement(P,fe({name:"duration",value:u,ticks:10},m)),"d"===_&&l.createElement(G,{id:"dt_simple_duration_datepicker",mode:"duration",name:"duration"}),"t"!==_&&"d"!==_&&l.createElement(p.InputField,fe({id:"dt_simple_duration_input",classNameInput:"trade-container__input",current_focus:o,error_messages:f.duration,name:"duration",label:v?null===(t=c[0])||void 0===t?void 0:t.text:null,setCurrentFocus:y,value:s(_)},d,m)))};ye.propTypes={changeDurationUnit:o().func,contract_expiry_type:o().string,current_focus:o().string,duration_t:o().number,duration_units_list:m.PropTypes.arrayOrObservableArray,getDurationFromUnit:o().func,number_input_props:o().object,setCurrentFocus:o().func,shared_input_props:o().object,simple_duration_unit:o().string,validation_errors:o().object};const ve=(0,h.$j)((function(e){var t=e.modules,r=e.ui;return{contract_expiry_type:t.trade.contract_expiry_type,current_focus:r.current_focus,setCurrentFocus:r.setCurrentFocus,simple_duration_unit:r.simple_duration_unit,validation_errors:t.trade.validation_errors}}))(ye);function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function he(){return he=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},he.apply(this,arguments)}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ge(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ee=function(e){var t=e.advanced_duration_unit,r=e.advanced_expiry_type,n=e.duration,i=e.duration_unit,o=e.duration_units_list,u=e.duration_t,s=e.expiry_date,d=e.expiry_time,m=e.expiry_type,y=e.getDurationFromUnit,v=e.hasDurationUnit,g=e.is_advanced_duration,h=e.is_minimized,b=e.min_value,x=e.max_value,E=e.onChange,C=e.onChangeUiStore,w=e.onChangeMultiple,k=e.simple_duration_unit,j=e.server_time,O=e.start_date,S=e.market_open_times,T=e.contract_type;l.useEffect((function(){"vanilla"===T&&I({target:{value:!0,name:"is_advanced_duration"}})}),[T]);var M=[{text:(0,f.localize)("Duration"),value:"duration"}],N=M.find((function(e){return"endtime"===e.value}));if(1===o.length&&"t"===i?N&&M.pop():N||M.push({text:(0,f.localize)("End time"),value:"endtime"}),h){var A=(0,_.toMoment)(s),F=(o.find((function(e){return e.value===i}))||{}).text;return l.createElement("div",{className:"fieldset-minimized fieldset-minimized__duration"},"duration"===m?"".concat(n," ").concat(F):"".concat(A.format("ddd - DD MMM, YYYY"),"\n").concat(d))}var D=function(e){var t=e.target,r=t.name,n=t.value,a=y(n);C({name:r,value:n}),w({duration_unit:n,duration:a})},I=function(e){var a=e.target,l=a.name,u=a.value;C({name:l,value:u});var c=u?t:k,s=y(c);v(c,u)||(c=o[0].value,C({name:"".concat(u?"advanced":"simple","_duration_unit"),value:c}));var d={};u||"duration"===m||(d.expiry_type="duration"),u&&m!==r&&(d.expiry_type=r),c===i&&s===n||(d.duration_unit=c,d.duration=s),Object.keys(d).length&&w(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){xe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},d))},L={shared_input:{is_hj_whitelisted:!0,onChange:function(e){var r=e.target,n=r.name,a=r.value,i="duration_".concat(g?t:k);C({name:i,value:+a}),E({target:{name:n,value:+a}})},max_value:x,min_value:b},number_input:{type:"number",is_incrementable:!0}},U=M.length>1||o.length>1;return l.createElement(c.Z,{className:a()("trade-container__fieldset",{"trade-container__fieldset--advanced":g})},1===o.length&&!g&&l.createElement(p.Dropdown,{classNameDisplay:"dc-dropdown__display--duration",disabled:!1,id:"duration",is_alignment_left:!0,is_nativepicker:!1,list:o,name:"simple_duration_unit",no_border:!0,onChange:D,value:k}),!U&&l.createElement(P,he({name:"duration",value:u},L.shared_input)),U&&l.createElement(l.Fragment,null,g&&l.createElement(pe,{advanced_expiry_type:r,advanced_duration_unit:t,changeDurationUnit:D,duration_t:u,duration_units_list:o,expiry_date:s,expiry_list:M,expiry_type:m,getDurationFromUnit:y,market_open_times:S,number_input_props:L.number_input,onChange:E,onChangeUiStore:C,server_time:j,shared_input_props:L.shared_input,start_date:O}),!g&&l.createElement(ve,{getDurationFromUnit:y,changeDurationUnit:D,duration_t:u,duration_units_list:o,number_input_props:L.number_input,shared_input_props:L.shared_input,simple_duration_unit:k}),"vanilla"!==T&&l.createElement(z,{name:"is_advanced_duration",onChange:I,value:g})))};Ee.propTypes={advanced_duration_unit:o().string,advanced_expiry_type:o().string,contract_type:o().string,duration:o().number,duration_t:o().number,duration_unit:o().string,duration_units_list:m.PropTypes.arrayOrObservableArray,expiry_date:o().oneOfType([o().string,o().number]),expiry_time:o().string,expiry_type:o().string,getDurationFromUnit:o().func,hasDurationUnit:o().func,is_advanced_duration:o().bool,is_minimized:o().bool,market_open_times:o().array,max_value:o().number,min_value:o().number,number_input:o().object,onChange:o().func,onChangeMultiple:o().func,onChangeUiStore:o().func,server_time:o().object,shared_input:o().object,simple_duration_unit:o().string,start_date:o().oneOfType([o().number,o().string]),validation_errors:o().object};const Ce=Ee;function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},we.apply(this,arguments)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||je(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){if(e){if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oe(e,t):void 0}}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Se=function(e){var t=e.advanced_duration_unit,r=e.advanced_expiry_type,n=e.duration,a=e.duration_unit,i=e.expiry_type,o=e.getDurationFromUnit,u=e.is_advanced_duration,c=e.onChange,s=e.onChangeUiStore,d=e.simple_duration_unit,m=e.contract_expiry_type,p=e.duration_min_max,f=e.duration_units_list,y=e.onChangeMultiple,v=function(e,t){var r=function(e){return function(e){if(Array.isArray(e))return Oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||je(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(f);return r.length>1&&!t&&(r=r.filter((function(e){return"m"===e.value||"t"===e.value}))),r.some((function(t){return t.value===e}))},g=l.useCallback((function(e){var t=ke((0,_.getDurationMinMaxValues)(p,m,a),2),r=t[0],n=t[1];"tick"===m&&e<r&&(s({name:"duration_".concat(a),value:r}),c({target:{name:"duration",value:r}})),!(e<r)&&e>n&&"d"!==a&&(s({name:"duration_".concat(a),value:n}),c({target:{name:"duration",value:n}}))}),[m,a,p,c,s]);l.useEffect((function(){"d"===a&&s({name:"is_advanced_duration",value:!0})}),[a,s]),l.useEffect((function(){var e=u?t:d,r=o(e);a!==e&&s({name:"".concat(u?"advanced":"simple","_duration_unit"),value:a}),+n!=+r&&s({name:"duration_".concat(a),value:n}),"endtime"===i&&(f.length>1||u?(u||s({name:"is_advanced_duration",value:!0}),s({name:"advanced_expiry_type",value:"endtime"})):c({target:{name:"expiry_type",value:"duration"}})),g(r)}),[]),l.useEffect((function(){u&&i!==r&&c({target:{name:"expiry_type",value:r}})}),[u,i,r,c]),l.useEffect((function(){var e=o(a);!u&&"duration"!==i&&c({target:{name:"expiry_type",value:"duration"}}),n!==e&&s({name:"duration_".concat(a),value:n}),g(e)}),[a,u,i,n,g,c,s,o]);var h=!v(u?t:d,u),b=!u&&"d"===d&&4===f.length,x=ke((0,_.getDurationMinMaxValues)(p,m,a),2),E=x[0],C=x[1];return(h||b)&&function(){if((null==f?void 0:f.length)>0){var e=f[0].value,t=o(e);s({name:"".concat(u?"advanced":"simple","_duration_unit"),value:e}),y({duration_unit:e,duration:+t})}}(),l.createElement(Ce,we({hasDurationUnit:v,max_value:C,min_value:E},e))};Se.propTypes={advanced_duration_unit:o().string,advanced_expiry_type:o().string,contract_expiry_type:o().string,duration:o().oneOfType([o().number,o().string]),duration_d:o().number,duration_h:o().number,duration_m:o().number,duration_min_max:o().object,duration_s:o().number,duration_t:o().oneOfType([o().number,o().string]),duration_unit:o().string,duration_units_list:m.PropTypes.arrayOrObservableArray,expiry_date:o().oneOfType([o().string,o().number]),expiry_time:o().string,expiry_type:o().string,getDurationFromUnit:o().func,is_advanced_duration:o().bool,is_minimized:o().bool,market_open_times:o().array,onChange:o().func,onChangeMultiple:o().func,onChangeUiStore:o().func,sessions:m.PropTypes.arrayOrObservableArray,simple_duration_unit:o().string,start_date:o().oneOfType([o().number,o().string]),start_time:o().string,symbol:o().string};const Te=(0,h.$j)((function(e){var t=e.modules,r=e.ui;return{advanced_duration_unit:r.advanced_duration_unit,advanced_expiry_type:r.advanced_expiry_type,contract_type:t.trade.contract_type,contract_expiry_type:t.trade.contract_expiry_type,duration:t.trade.duration,duration_unit:t.trade.duration_unit,duration_units_list:t.trade.duration_units_list,duration_min_max:t.trade.duration_min_max,duration_t:r.duration_t,expiry_date:t.trade.expiry_date,expiry_time:t.trade.expiry_time,expiry_type:t.trade.expiry_type,getDurationFromUnit:r.getDurationFromUnit,is_advanced_duration:r.is_advanced_duration,onChange:t.trade.onChange,onChangeUiStore:r.onChangeUiStore,onChangeMultiple:t.trade.onChangeMultiple,simple_duration_unit:r.simple_duration_unit,start_date:t.trade.start_date,market_open_times:t.trade.market_open_times}}))(Se);var Me=r("./src/Modules/Trading/Components/Form/TradeParams/last-digit.jsx"),Ne=r("./src/Stores/Modules/Trading/Helpers/multiplier.js");function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Fe=function(e){var t=e.cancellation_range_list,r=e.cancellation_duration,n=e.has_cancellation,a=e.has_take_profit,i=e.has_stop_loss,o=e.onChangeMultiple,u=e.should_show_cancellation_warning,s=e.toggleCancellationWarning,d=(a||i)&&u,m=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,o,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,a=e}finally{try{if(!u&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(c)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l.useState(!u),2),_=m[0],y=m[1],v=l.useCallback((function(){y((function(e){return!e}))}),[]),g=l.createElement(p.Checkbox,{id:"dt_cancellation-checkbox_input",onChange:function(){return(0,Ne.Lf)({has_cancellation:n,onChangeMultiple:o})},name:"has_cancellation",label:(0,f.localize)("Deal cancellation"),defaultChecked:n});return l.createElement(c.Z,{className:"trade-container__fieldset"},l.createElement("div",{className:"dc-input-wrapper--inline"},d?l.createElement(p.Popover,{alignment:"left",classNameBubble:"trade-container__popover",is_bubble_hover_enabled:!0,margin:2,message:l.createElement(p.PopoverMessageCheckbox,{defaultChecked:_,checkboxLabel:(0,f.localize)("Don't show this again"),message:(0,f.localize)("Take profit and/or stop loss are not available while deal cancellation is active."),name:"should_show_cancellation_warning",onChange:v}),onBubbleClose:function(){_&&s()},relative_render:!0},g):l.createElement(l.Fragment,null,g),l.createElement(p.Popover,{alignment:"left",icon:"info",id:"dt_cancellation-checkbox__tooltip",is_bubble_hover_enabled:!0,message:(0,f.localize)("Cancel your trade anytime within a chosen time-frame. Triggered automatically if your trade reaches the stop out level within the chosen time-frame."),classNameBubble:"trade-container__deal-cancellation-popover",margin:216,relative_render:!0})),n&&l.createElement(p.Dropdown,{id:"dt_cancellation_range",className:"trade-container__multiplier-dropdown",is_alignment_left:!0,is_nativepicker:!1,list:t,name:"cancellation_duration",no_border:!0,value:r,onChange:function(e){return(0,Ne.Qu)({event:e,onChangeMultiple:o})}}))};Fe.propTypes={cancellation_range_list:o().array,cancellation_duration:o().string,has_cancellation:o().bool,has_stop_loss:o().bool,has_take_profit:o().bool,onChangeMultiple:o().func,should_show_cancellation_warning:o().bool,toggleCancellationWarning:o().func};const Pe=(0,h.$j)((function(e){var t=e.modules,r=e.ui;return{cancellation_range_list:t.trade.cancellation_range_list,cancellation_duration:t.trade.cancellation_duration,has_cancellation:t.trade.has_cancellation,has_stop_loss:t.trade.has_stop_loss,has_take_profit:t.trade.has_take_profit,onChangeMultiple:t.trade.onChangeMultiple,should_show_cancellation_warning:r.should_show_cancellation_warning,toggleCancellationWarning:r.toggleCancellationWarning}}))(Fe);var De=r("./src/App/Components/Form/number-selector.jsx"),ze=function(e){var t,r,n=e.accumulator_range_list,i=e.growth_rate,o=e.onChange,u=e.tick_size_barrier,s=e.proposal_info,d=n.reduce((function(e,t,r){return r%5==0&&e.push(n.slice(r,r+5)),e}),[]),m=(null==s||null===(t=s.ACCU)||void 0===t?void 0:t.has_error)||!(null!=s&&null!==(r=s.ACCU)&&void 0!==r&&r.id)||(0,_.isEmptyObject)(s);return n.length?l.createElement(c.Z,{className:a()("trade-container__fieldset","accumulator"),header:(0,f.localize)("Accumulate"),is_center:!0,is_tooltip_disabled:m,header_tooltip:(0,f.localize)("Your stake will grow by {{growth_rate}}% at every tick starting from the second tick, as long as the price remains within a range of Â±{{tick_size_barrier}} from the previous tick price.",{growth_rate:(0,_.getGrowthRatePercentage)(i),tick_size_barrier:(0,_.getTickSizeBarrierPercentage)(u)})},l.createElement(De.Z,{arr_arr_numbers:d,name:"growth_rate",onChange:o,selected_number:i,should_show_in_percents:!0})):null};ze.propTypes={accumulator_range_list:m.PropTypes.arrayOrObservableArray,growth_rate:o().number,onChange:o().func,proposal_info:o().object,tick_size_barrier:o().number};const Ie=(0,h.$j)((function(e){var t=e.modules;return{accumulator_range_list:t.trade.accumulator_range_list,growth_rate:t.trade.growth_rate,onChange:t.trade.onChange,proposal_info:t.trade.proposal_info,tick_size_barrier:t.trade.tick_size_barrier}}))(ze);var Le=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/stop-loss.jsx"),Ue=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/take-profit.jsx"),Ye=r("./src/Modules/Trading/Components/Form/TradeParams/Multiplier/expiration.jsx"),qe=r("./src/Modules/Trading/Components/Form/TradeParams/Accumulator/accumulators-info-display.jsx"),Ze=r("./src/Modules/Trading/Components/Form/TradeParams/strike.jsx"),$e=r("./src/Modules/Trading/Components/Form/TradeParams/vanilla-trade-types.jsx"),He=function(e){var t=e.form_components,r=e.is_minimized,n=function(e){return t.includes(e)};return l.createElement(l.Fragment,null,n("duration")&&l.createElement(Te,{key:"duration",is_minimized:r}),n("barrier")&&l.createElement(S.Z,{key:"barrier",is_minimized:r}),n("last_digit")&&l.createElement(Me.Z,{key:"last_digit",is_minimized:r}),n("accumulator")&&l.createElement(Ie,{key:"accumulator"}),l.createElement(c.Z,{className:a()("trade-container__fieldset","trade-container__fieldset--no-padding")},n("vanilla_trade_type")&&l.createElement($e.Z,{key:"vanilla_trade_type"}),n("strike")&&l.createElement(Ze.Z,{key:"strike"}),n("amount")&&l.createElement(O,{key:"amount",is_minimized:r})),n("take_profit")&&l.createElement(Ue.Z,{key:"take_profit"}),n("stop_loss")&&l.createElement(Le.Z,{key:"stop_loss"}),n("cancellation")&&l.createElement(Pe,{key:"cancellation"}),n("expiration")&&l.createElement(Ye.Z,{key:"expiration"}),n("accu_info_display")&&l.createElement(qe.Z,{key:"accu_info_display"}))};He.propTypes={form_components:m.PropTypes.arrayOrObservableArray,is_minimized:o().bool};const Ge=(0,h.$j)((function(e){return{form_components:e.modules.trade.form_components}}))(He);var Be=function(e){var t=e.is_market_closed,r=e.is_trade_enabled;return l.createElement("div",{className:a()("sidebar__items",{"sidebar__items--market-closed":t})},r?l.createElement(l.Fragment,null,l.createElement(c.Z,{className:"trade-container__fieldset trade-types"},l.createElement(s.Z,null)),l.createElement(Ge,null),l.createElement("div",{className:"purchase-container"},l.createElement(d.Z,{is_market_closed:t}))):l.createElement(u.G,{speed:2}))};Be.propTypes={is_market_closed:o().bool,is_trade_enabled:o().bool};const We=Be}}]);